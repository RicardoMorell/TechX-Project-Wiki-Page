<!DOCTYPE html>
<html>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://code.jquery.com/ui/1.13.0/jquery-ui.min.js"></script>
<link rel="stylesheet" href="https://code.jquery.com/ui/1.13.0/themes/smoothness/jquery-ui.css">

    <style>
        .profile-pic-icon {
        width: 35px;
        height: 35px;
        border-radius: 50%;
        object-fit: cover;
        }
    </style>

    <div id='navigation-buttons'>
        <head>
            <head>
                <title>Wiki Server</title>
                <style>
                *   {box-sizing: border-box;}

                    body {
                        margin: 0;
                        font-family: Arial, Helvetica, sans-serif;
                    }

                    .topnav {
                        overflow: hidden;
                        background-color: #e9e9e9;
                        height: 8%;
                        /* position: absolute; */
                    }

                    .topnav a {
                        float: left;
                        display: block;
                        color: black;
                        text-align: center;
                        padding: 10px 12px;
                        text-decoration: none;
                        font-size: 17px;
                    }

                    .topnav a:hover {
                        background-color: #9a5aed;
                        color: black;
                    }

                    .topnav .search-container {
                        position: absolute;
                        top: 5px;
                        right: 0;
                    }

                    .topnav input[type=text] {
                        padding: 6px;
                        margin-top: 0px; /* Moves the search bar up or down */
                        font-size: 17px;
                        border: none;
                    }

                    .topnav .search-container button {
                        position: relative;
                        float: right;
                        padding: 6px 10px;
                        background: #ddd;
                        font-size: 17px;
                        border: none;
                        cursor: pointer;
                    }

                    .topnav .search-container button:hover {
                        background: #ccc;
                    }

                    @media screen and (max-width: 600px){
                        .topnav .search-container {
                            float: none;
                        }
                        .topnav a, .topnav input[type=text], .topnav .search-container button {
                            float: none;
                            display: block;
                            text-align: left;
                            width: 100%;
                            margin: 0;
                            padding: 14px;
                        }
                        .topnav input[type=text] {
                            border: 1px solid #ccc;
                        }
                    }
                </style>
            </head>
        </head>
        <!-- If the user is not authenticated, the code displays a set of navigation buttons to other pages also welcomes the user to the website. -->
        {% if not current_user.is_authenticated %}
        <div class="topnav">
            <a href="/">Home</a>

            <a href="/about">About</a>

            <a href="/pages">Pages</a>

            <a href="/login">Log In</a>

            <a href="/signup">Sign Up</a>
        </div>
        <!-- On the other hand, if the user is authenticated, the code displays a similar set of navigation buttons, but includes additional buttons for uploading content and logging out. -->
        {% else %}
        <div class="topnav">
            <a href="/">Home</a>

            <a href="/pages">Pages</a>

            <a href="/about">About</a>

            
            <a href="/upload">Upload</a>

            <a href="/logout">Logout</a>

            <a href="/profile">|  {{ current_user.username }}   <img class="profile-pic-icon" src="{{ current_user.get_pfp() }}" alt="Profile Picture">|</a>
        </div>
        {% endif %}

        <!-- The form action part is what redirects the user to another page when they press on the magnifying button  -->        
        <form action="/pages" method="get" class="topnav">
            <div class="search-container">
                <input type="text" placeholder="Search for a PC part"  id="input-datalist" autocomplete="off">
                <button type="submit"><i class="fa fa-search"></i></button>
               
            </div>
        </form>


            <datalist id="list-pcparts">
                {% for page in pages %}
                <option value="{{ page }}" data-url="/pages/{{ page }}">{{ page }}</option>                
                {% endfor %}
            </datalist>

            <!-- This only works when we're in the /pages route due to the wiki page list showing up when the user was inside an article -->
            <datalist id="list-pcparts">
                {% for page in wiki_pages %}
                <option value="{{ page }}" data-url="/pages/{{ page }}">{{ page }}</option>                
                {% endfor %}
            </datalist>
      
        <div id="autocompleteDropdown">
            <script>
                $(function myAutocompleteFunction() {
                    $('#input-datalist').autocomplete({
                        source: function(request, response) {
                            const options = $('#list-pcparts option');
                            const results = $.map(options, function(option) {
                                const value = option.value;
                                if (value.toLowerCase().startsWith(request.term.toLowerCase())) {
                                    return {
                                        label: value,
                                        value: value,
                                        url: option.getAttribute('data-url')
                                    };
                                }
                            });
                            response(results);
                        },
                        select: function(event, ui) {
                            window.location.href = ui.item.url;
                            return false;
                        }
                    });
                });
            </script>
        </div>     
       
        
        
        {% block content %}
            <body id="Home">
                {% if not current_user.is_authenticated %}
                    <p>
                        <span>Welcome to our awesome Wiki Server, we're glad to have you here!</span>
                    </p>
                {% else %}
                    <p>
                        Welcome, <span style = "color:fuchsia"><b>{{ current_user.username }}</b></span>!
                    </p>
                {% endif %}

                <div id="your_id">       
                    <br><font size= 5><b>The Ultimate Guide to Building a PC</b></font>
                </div>
            </body>
            <body id="imageGallery">
                <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ" crossorigin="anonymous">
                <style>
                .css-item {
                    background-color: #777;
                    height: 700px;
                }
            
                .css-img {
                    height: 80%;
                    object-fit: contain;
                }
                </style>
                <script defer src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ENjdO4Dr2bkBIFxQpeoTz1HIcje39Wm4jDKdf19U8gI4ddQ3GYNS7NTKfAdVQSZe" crossorigin="anonymous"></script>
                <div id="computerCarousel" class="carousel slide" data-bs-ride="carousel">
                <div class="carousel-inner">
                    <div class="carousel-item active css-item" data-bs-interval="5000">
                    <img src="https://storage.cloud.google.com/awesomewikicontent/peripherals.jpeg" class="d-block w-100 css-img" alt="slide1">
                    <div class="carousel-caption d-none d-md-block">
                        <h5>First slide label</h5>
                        <p>Some representative placeholder content for the first slide.</p>
                    </div>
                
                    </div>
                    <div class="carousel-item css-item" data-bs-interval="5000">
                    <img src="https://storage.cloud.google.com/awesomewikicontent/ceo_of_cs.jpg" class="d-block w-100 css-img" alt="slide2">
                    <div class="carousel-caption d-none d-md-block">
                        <h5>Second slide label</h5>
                        <p>Some representative placeholder content for the first slide.</p>
                    </div>
                
                    </div>
                    <div class="carousel-item css-item" data-bs-interval="5000">
                    <img src="https://storage.cloud.google.com/awesomewikicontent/kitty.jpg" class="d-block w-100 css-img" alt="slide3">
                    <div class="carousel-caption d-none d-md-block">
                        <h5>Third slide label</h5>
                        <p>Some representative placeholder content for the first slide.</p>
                    </div>
                
                    </div>
                </div>
                
                <button class="carousel-control-prev" type="button" data-bs-target="#computerCarousel" data-bs-slide="prev">
                    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                    <span class="visually-hidden">Previous</span>
                </button>
                <button class="carousel-control-next" type="button" data-bs-target="#computerCarousel" data-bs-slide="next">
                    <span class="carousel-control-next-icon" aria-hidden="true"></span>
                    <span class="visually-hidden">Next</span>
                </button>
                
                </div>
            </body>
            <div id="contributors">
                <p>Contributors:</p>
                {% for contributor in contributors %}
                    <li>{{ contributor }}</li>
                {% endfor %}
            </div>

        {% endblock %}
    </div>
    
</html>